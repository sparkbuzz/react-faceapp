(this["webpackJsonp@faceapp/react-faceapp"]=this["webpackJsonp@faceapp/react-faceapp"]||[]).push([[0],{177:function(e,t,n){e.exports={wrapper:"styles_wrapper__2Kat_",cover:"styles_cover__LVGb0"}},238:function(e,t,n){e.exports={emoticon:"styles_emoticon__1BMFv"}},239:function(e,t,n){e.exports={canvas:"styles_canvas__bHHcy"}},298:function(e,t){},299:function(e,t){},307:function(e,t){},309:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var r,c=n(34),a=n.n(c),i=n(220),o=n.n(i),u=n(7),s=n(165),l=n.n(s),f=n(11),d=n.n(f),v=n(14),h=n(178);n(310);!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_META_DATA=1]="HAVE_META_DATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(r||(r={}));var p=null,b=!1,j=n(237),O=!1,A=function(){var e=Object(c.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=Object(j.debounce)((function(){r({width:window.innerWidth,height:window.innerHeight})}),200);O||(window.addEventListener("resize",e),O=!0)}),[]),n},g=function(e,t,n){e.fillRect(t-1,n-1,2,2)},E=n(238),_=n.n(E),w=n(41),x=Object(c.forwardRef)((function(e,t){var n=e.flip,r=e.style,a=t;return Object(c.useEffect)((function(){if(a.current){a.current.innerHTML=JSON.parse('"'.concat("&#128065;",'"'))}}),[a]),r||(r={}),n&&(r.transform="scaleX(-1)"),Object(w.jsx)("div",{style:r,className:_.a.emoticon,ref:a})})),y=n(239),H=n.n(y),m=function(e){var t=e.className,n=e.drawPointCloud,a=e.srcObject,i=Object(c.useRef)(null),o=Object(c.useRef)(null),s=Object(c.useRef)(null),f=Object(c.useState)(null),j=Object(u.a)(f,2),O=j[0],E=j[1],_=Object(c.useState)({x:0,y:0}),y=Object(u.a)(_,2),m=y[0],T=y[1],N=Object(c.useState)({x:0,y:0}),R=Object(u.a)(N,2),S=R[0],D=R[1],V=function(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),a=n[0],i=n[1],o=Object(c.useState)(),s=Object(u.a)(o,2),l=s[0],f=s[1];function j(){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b&&(null===e||void 0===e?void 0:e.current)&&e.current.readyState===r.HAVE_ENOUGH_DATA){t.next=2;break}return t.abrupt("return");case 2:return b=!0,t.next=5,null===a||void 0===a?void 0:a.estimateFaces({input:e.current,flipHorizontal:!1});case 5:n=t.sent,f(n),b=!1;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return g.apply(this,arguments)}function g(){return(g=Object(v.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var t;if(!a&&(null===(t=e.current)||void 0===t?void 0:t.readyState)===r.HAVE_ENOUGH_DATA)return h.b(h.a.mediapipeFacemesh,{maxFaces:1}).then((function(e){i(e)})),function(){p&&window.clearInterval()}}),[a,e]),!p&&a&&(p=window.setInterval(A,1e3/30)),l}(a),U=A(),F=U.width,C=U.height;return Object(c.useEffect)((function(){if(V){if(function(){var e,t,n,r,c;if(!i)return;var o=null===(e=i.current)||void 0===e?void 0:e.getContext("2d");if(!o)throw Error("Attempt to get 2D canvas context failed!");o.canvas.width=null!==(t=null===(n=a.current)||void 0===n?void 0:n.offsetWidth)&&void 0!==t?t:0,o.canvas.height=null!==(r=null===(c=a.current)||void 0===c?void 0:c.offsetHeight)&&void 0!==r?r:0,E(o)}(),!O)return;!function(){var e,t;if(!O||!i)return;O.clearRect(0,0,(null===(e=i.current)||void 0===e?void 0:e.width)||0,(null===(t=i.current)||void 0===t?void 0:t.height)||0)}();var e=O.canvas.offsetWidth/a.current.videoWidth,t=O.canvas.offsetHeight/a.current.videoHeight;n&&function(e,t){if(!V||!O||!a)return;O.fillStyle="limegreen";for(var n=0;n<V.length;n++)for(var r,c=null===(r=V[n])||void 0===r?void 0:r.scaledMesh,i=0;i<c.length;i++){var o=Object(u.a)(c[i],2),s=o[0],l=o[1];g(O,s*e,l*t)}}(e,t),function(e,t){var n,r,c,i;if(!V||0===V.length||!a.current)return;var l=(null!==(n=null===(r=o.current)||void 0===r?void 0:r.offsetWidth)&&void 0!==n?n:0)/2,f=(null!==(c=null===(i=s.current)||void 0===i?void 0:i.offsetHeight)&&void 0!==c?c:0)/2,d=V[0];if(d.annotations){var v,h,p,b,j=Object(u.a)(d.annotations.leftEyeIris[0],2),O=j[0],A=j[1];T({x:O*e+(null===(v=a.current)||void 0===v?void 0:v.offsetLeft)-l,y:A*t+(null===(h=a.current)||void 0===h?void 0:h.offsetTop)-f});var g=Object(u.a)(d.annotations.rightEyeIris[0],2);O=g[0],A=g[1],D({x:O*e+(null===(p=a.current)||void 0===p?void 0:p.offsetLeft)-l,y:A*t+(null===(b=a.current)||void 0===b?void 0:b.offsetTop)-f})}}(e,t)}}),[O,n,V,a,F,C,o,s]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("canvas",{className:l()(t,H.a.canvas),ref:i}),Object(w.jsx)(x,{flip:!0,ref:o,style:{display:V&&(null===V||void 0===V?void 0:V.length)?"block":"none",top:"".concat(m.y,"px"),left:"".concat(m.x,"px")}}),Object(w.jsx)(x,{ref:s,style:{display:V&&(null===V||void 0===V?void 0:V.length)?"block":"none",top:"".concat(S.y,"px"),left:"".concat(S.x,"px")}})]})},T=Object(c.forwardRef)((function(e,t){var n=e.className,r=e.onReadyStateChange,a=t,i=A(),o=i.width,u=i.height;return Object(c.useEffect)((function(){var e;if(r&&a.current){e=a.current;var t=function(e){var t=e.target.readyState;return r(t)};return a.current.addEventListener("loadeddata",t),function(){e&&e.removeEventListener("loadedData",t)}}}),[a,r]),Object(c.useEffect)((function(){var e={audio:!1,video:{facingMode:{ideal:"user"},width:o,height:u}};navigator.mediaDevices.getUserMedia(e).then((function(e){(null===a||void 0===a?void 0:a.current)&&(a.current.srcObject=e)})).catch((function(e){"NotAllowedError"===e.name?console.log("This app needs permissions to use your camera to run!\nPlease grant the appropriate permissions and reload this page to see some action."):console.error(e)}))}),[o,u,a]),Object(w.jsx)("video",{autoPlay:!0,className:l()(n),ref:a})})),N=n(177),R=n.n(N),S=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(!1),n=Object(u.a)(t,2),a=n[0],i=n[1];return Object(w.jsxs)("div",{className:R.a.wrapper,children:[Object(w.jsx)(T,{ref:e,className:R.a.cover,onReadyStateChange:function(e){i(e===r.HAVE_ENOUGH_DATA)}}),a&&Object(w.jsx)(m,{drawPointCloud:!1,srcObject:e})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};n(309);o.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(S,{})}),document.getElementById("root")),D()}},[[311,1,2]]]);
//# sourceMappingURL=main.123b22f0.chunk.js.map